{% extends "base.html" %}
{% block title %}+ Ingreso{% endblock %}
{% block content %}
<h2>Nuevo Ingreso</h2>

<form class="grid" method="post" action="/ingresos/nuevo">
  <div>
    <label>Monto (COP)</label>
    <input name="monto" type="text" placeholder="$ 0" required />
  </div>

  <div>
    <label>Semestre</label>
    <select name="semestre" required>
      <option value="126">126</option><option value="226">226</option>
      <option value="326">326</option><option value="426">426</option>
      <option value="526">526</option><option value="GENERAL">GENERAL</option>
    </select>
  </div>

  <div>
    <label>Cuenta</label>
    <select name="cuenta" id="cuenta" required>
      <option value="BANCOLOMBIA_1423">BANCOLOMBIA_1423</option>
      <option value="BANCOLOMBIA_7356">BANCOLOMBIA_7356</option>
      <option value="NEQUI">NEQUI</option>
      <option value="DAVIVIENDA">DAVIVIENDA</option>
      <option value="EFECTIVO">EFECTIVO</option>
      <option value="EFECTY">EFECTY</option>
    </select>
  </div>

  <div>
    <label>Detalle de cuenta / Método</label>
    <select name="detalle_cuenta" id="detalle_cuenta" required>
      <option value="BANCOLOMBIA">BANCOLOMBIA</option>
      <option value="WOMPI">WOMPI</option>
      <option value="NEQUI">NEQUI</option>
      <option value="DAVIVIENDA">DAVIVIENDA</option>
      <option value="EFECTIVO">EFECTIVO</option>
      <option value="EFECTY">EFECTY</option>
      <option value="PAGO INTERESES">PAGO INTERESES</option>
    </select>
  </div>

  <div id="wompi_tipo_wrap" style="display:none">
    <label>Si WOMPI, ¿PSE o TC?</label>
    <select name="metodo_wompi" id="metodo_wompi">
      <option value="PSE">PSE</option>
      <option value="TC">TC</option>
    </select>
  </div>

  <div>
    <label>Línea</label>
    <input name="linea" type="text" placeholder="PENDIENTE" />
  </div>

  <div>
    <label>User</label>
    <input name="user" type="text" placeholder="PENDIENTE" />
  </div>

  <!-- opcional, por si lo usas desde el front -->
  <input type="hidden" name="flag_linea_user" value="1" />

  <div class="mt">
    <button type="submit">Guardar</button>
    <a href="/ingresos" style="margin-left:8px"><button type="button">Ver Ingresos</button></a>
  </div>
</form>

<script>
  const detalle = document.getElementById('detalle_cuenta');
  const wompiWrap = document.getElementById('wompi_tipo_wrap');
  function toggleWompi(){ wompiWrap.style.display = (detalle.value === 'WOMPI') ? 'block' : 'none'; }
  detalle.addEventListener('change', toggleWompi);
  toggleWompi();
</script>
{% endblock %}
